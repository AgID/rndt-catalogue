<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
* Copyright 2009 EUROPEAN CCOMMUNITIES
*
* Licensed under the EUPL, Version 1.1 or – as soon they will be approved by the European Commission - subsequent versions of the EUPL (the "Licence");
* You may not use this work except in compliance with the Licence.
* You may obtain a copy of the Licence at:
*
* http://ec.europa.eu/idabc/eupl
*
* Unless required by applicable law or agreed to in writing, software distributed under the Licence is distributed on an "AS IS" basis,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the Licence for the specific language governing permissions and limitations under the Licence.

*Authors: Kristian Senkler, con terra Gesellschaft für Informationstechnologie mbH <K.Senkler@conterra.de>, 
		  Gianluca Luraschi <gianluca.luraschi@jrc.ec.europa.eu>, European Commission, Joint Research Centre
		  Ioannis Kanellopoulos <ioannis.kanellopoulos@jrc.ec.europa.eu>, European Commission, Joint Research Centre

*/ 
-->
<sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron">
	<sch:ns uri="http://www.isotc211.org/2005/gmd" prefix="gmd"/>
	<sch:ns uri="http://www.isotc211.org/2005/gco" prefix="gco"/>
	<sch:ns uri="http://www.isotc211.org/2005/srv" prefix="srv"/>
	<sch:ns uri="http://www.w3.org/1999/xlink" prefix="xlink"/>
	<sch:ns uri="http://www.opengis.net/gml/3.2" prefix="gml"/>
	<sch:let name="smallcase" value="'abcdefghijklmnopqrstuvwxyz'"/>
	<sch:let name="uppercase" value="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
	<!-- ############################################ -->
	<!-- General issues                               -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing implementation</sch:title>
		<sch:rule context="/*">
			<sch:assert test="namespace-uri(/*) = 'http://www.isotc211.org/2005/gmd'">Il documento XML e' definito in un namespace sbagliato:
				<sch:value-of select="namespace-uri(/*)"/>
			</sch:assert>
			<sch:report test="namespace-uri(/*) = 'http://www.isotc211.org/2005/gmd'">Il namespace del documento e' <sch:value-of select="namespace-uri(/*)"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Identification                               -->
	<!-- ############################################ -->
	<sch:pattern >
		<sch:title>Testing 'Identification' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*/gmd:citation/*">La struttura dell'xml è errata: sezione //gmd:identificationInfo[1]/*/gmd:citation non presente </sch:assert>
			<sch:assert test="//gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine/*">La struttura dell'xml è errata: sezione //gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine non presente </sch:assert>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:citation/*">
			<sch:let name="resourceTitle" value="gmd:title/*/text()"/>
			<sch:let name="resourceIdentifier_code" value="gmd:identifier/*/gmd:code/*/text()"/>
			<sch:let name="resourceIdentifier_codeSpace" value="gmd:identifier/*/gmd:codeSpace/*/text()"/>

			<!-- assertions and report -->
			<sch:assert test="$resourceTitle">L'elemento "Titolo" non e' presente</sch:assert>
			<sch:report test="$resourceTitle">Titolo: <sch:value-of select="$resourceTitle"/>
			</sch:report>
			<sch:assert test="$resourceIdentifier_code">L'elemento "Identificatore" non e' presente</sch:assert>
			<sch:report test="$resourceIdentifier_code">Identificatore:
				<sch:value-of select="$resourceIdentifier_code"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:distributionInfo/*/gmd:transferOptions/*/gmd:onLine/*">
			<sch:let name="resourceLocator" value="gmd:linkage/*/text()"/>
			<!-- assertions and report -->
			<sch:report test="$resourceLocator">Risorsa online:
				<sch:value-of select="$resourceLocator"/>
			</sch:report>
		</sch:rule>
		<!--<sch:rule context="//gmd:MD_Metadata/gmd:hierarchyLevel[1]">-->
		<sch:rule context="//gmd:MD_Metadata">
			<sch:let name="resourceType_present" value="gmd:hierarchyLevel[1]/*/text()='dataset'
                            or translate(gmd:hierarchyLevel[1]/*/text(), $uppercase, $smallcase) ='series'
                            or translate(gmd:hierarchyLevel[1]/*/text(), $uppercase, $smallcase)='service'
                            or translate(gmd:hierarchyLevel[1]/*/text(), $uppercase, $smallcase)='dataset'
                            or translate(gmd:hierarchyLevel[1]/*/text(), $uppercase, $smallcase)='serie'
                            or translate(gmd:hierarchyLevel[1]/*/text(), $uppercase, $smallcase)='servizio'"/>
			<sch:let name="resourceType" value="gmd:hierarchyLevel[1]/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$resourceType_present">L'elemento "Livello gerarchico" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$resourceType_present">Livello gerarchico:
				<sch:value-of select="$resourceType"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="resourceAbstract" value="gmd:abstract/*/text()"/>

			<!-- assertions and report -->
			<sch:assert test="$resourceAbstract">L'elemento "Descrizione" non e' presente</sch:assert>
			<sch:report test="$resourceAbstract">Descrizione:
				<sch:value-of select="$resourceAbstract"/>
			</sch:report>

		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text() ='service'] | //gmd:hierarchyLevel[1]/*[text()='Servizio'] | //gmd:hierarchyLevel[1]/*[text()='servizio']">
			<sch:let name="coupledResource" value="//srv:operatesOn/@xlink:href"/>
			<sch:let name="couplingType" value="//srv:couplingType/*/text()"/>
			<sch:let name="couplingType_present" value="translate(//srv:couplingType/*/text(), $uppercase, $smallcase) ='loose' or
																				translate(//srv:couplingType/*/text(), $uppercase, $smallcase)='mixed' or
																				translate(//srv:couplingType/*/text(), $uppercase, $smallcase)='tight' or
																				translate(//srv:couplingType/*/text(), $uppercase, $smallcase)='svincolato' or
																				translate(//srv:couplingType/*/text(), $uppercase, $smallcase)='misto' or
																				translate(//srv:couplingType/*/text(), $uppercase, $smallcase)='vincolato'"/>
			<sch:let name="containsOperations_name" value="//srv:containsOperations/*/srv:operationName/*/text()"/>
			<sch:let name="containsOperations_DCP" value="//srv:containsOperations/*/srv:DCP/*/text()"/>
			<sch:let name="containsOperations_DCP_present" value="//srv:containsOperations/*/srv:DCP/*/text()='XML' or
																									//srv:containsOperations/*/srv:DCP/*/text()='xml' or
																									//srv:containsOperations/*/srv:DCP/*/text()='CORBA' or
																									//srv:containsOperations/*/srv:DCP/*/text()='JAVA' or
																									//srv:containsOperations/*/srv:DCP/*/text()='COM' or
																									//srv:containsOperations/*/srv:DCP/*/text()='SQL' or
																									//srv:containsOperations/*/srv:DCP/*/text()='WebServices' or
																									//srv:containsOperations/*/srv:DCP/*/text()='webServices'"/>
			<sch:let name="containsOperations_connectPoint" value="//srv:containsOperations/*/srv:connectPoint/*/gmd:linkage/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$couplingType_present">L'elemento "Tipo di aggancio" non e' presente</sch:assert>
			<sch:report test="$couplingType_present">Tipo di aggancio: <sch:value-of select="$couplingType"/>
			</sch:report>
			<sch:report test="$coupledResource">Risorsa accoppiata: <sch:value-of select="$coupledResource"/>
			</sch:report>
			<sch:assert test="$containsOperations_name">L'elemento "Operazioni - Nome operazione" non e' presente</sch:assert>
			<sch:report test="$containsOperations_name">Operazioni - Nome operazione: <sch:value-of select="$containsOperations_name"/>
			</sch:report>
			<sch:assert test="$containsOperations_DCP_present">L'elemento "Operazioni - DCP" non e' presente</sch:assert>
			<sch:report test="$containsOperations_DCP_present">Operazioni - DCP: <sch:value-of select="$containsOperations_DCP"/>
			</sch:report>
			<sch:assert test="$containsOperations_connectPoint">L'elemento "Operazioni - Punto di connessione" non e' presente</sch:assert>
			<sch:report test="$containsOperations_connectPoint">Operazioni - Punto di connessione: <sch:value-of select="$containsOperations_connectPoint"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='dataset'] | //gmd:hierarchyLevel[1]/*[text()='series'] | //gmd:hierarchyLevel[1]/*[text()='Dataset'] | //gmd:hierarchyLevel[1]/*[text()='Serie'] | //gmd:hierarchyLevel[1]/*[text()='serie']">
			<sch:let name="dataCharacterSet" value="../../gmd:identificationInfo[1]/*/gmd:characterSet/*/text()"/>
			<sch:let name="presentationForm" value="../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()"/>
			<sch:let name="presentationForm_present" value="../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='documentDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='documentHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='imageDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='imageHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='mapDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='mapHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='modelDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='modelHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='profileDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='profileHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='tableDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='tableHardcopy'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='videoDigital'
																						or ../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text()='videoHardcopy'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='documento digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='documento cartaceo'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='immagine digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='immagine cartacea'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='mappa digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='mappa cartacea'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='modello digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='modello fisico'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='profilo digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='profilo cartaceo'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='tabella digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='tabella cartacea'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='video digitale'
																						or translate(../../gmd:identificationInfo[1]/*/gmd:citation/*/gmd:presentationForm/*/text(), $uppercase, $smallcase)='video analogico'"/>
			<sch:let name="spatialRepresentationType" value="../../gmd:identificationInfo[1]/*/gmd:spatialRepresentationType/*/text()"/>
			<sch:let name="resourceLanguage_present" value="translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='bul' or
							translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='ita' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='cze' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='lav' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='dan' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='lit' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='dut' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='mlt' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='eng' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='pol' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='est' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='por' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='fin' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='rum' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='fre' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='slo' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='ger' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='slv' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='gre' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='spa' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='hun' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='swe' or
                            translate(../../gmd:identificationInfo[1]/*/gmd:language/*/text(), $uppercase, $smallcase)='gle'"/>
			<sch:let name="resourceLanguage" value="//gmd:identificationInfo[1]/*/gmd:language/*/text()"/>
			<sch:let name="series" value="//gmd:identificationInfo[1]/*/gmd:citation/*/gmd:series/*/gmd:issueIdentification/*/text()"/>
			<sch:let name="otherCitationDetails" value="//gmd:identificationInfo[1]/*/gmd:citation/*/gmd:otherCitationDetails/*/text()"/>
			<sch:let name="supplementalInformation" value="//gmd:identificationInfo[1]/*/gmd:supplementalInformation/*/text()"/>
			<!-- assertions and report -->
			<!-- resource language is only conditional for 'dataset' and 'series'. So no assert is defined -->
			<!--<sch:report test="$resourceIdentifier_codeSpace">(2.2.5) Unique resource identifier (codeSpace) found:
                <sch:value-of select="$resourceIdentifier_codeSpace"/>
			</sch:report>-->
			<sch:assert test="$series">L'elemento "Id livello superiore" non e' presente</sch:assert>
			<sch:report test="$series">Id livello superiore:
				<sch:value-of select="$series"/>
			</sch:report>
			<sch:report test="$dataCharacterSet">Set dei caratteri:
				<sch:value-of select="$dataCharacterSet"/>
			</sch:report>
			<sch:assert test="$presentationForm_present">L'elemento "Formato di presentazione" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$presentationForm_present">Formato di presentazione:
				<sch:value-of select="$presentationForm"/>
			</sch:report>
			<sch:assert test="$spatialRepresentationType">L'elemento "Tipo di rappresentazione spaziale" non e' presente</sch:assert>
			<sch:report test="$spatialRepresentationType">Tipo di rappresentazione spaziale:
				<sch:value-of select="$spatialRepresentationType"/>
			</sch:report>
			<sch:report test="$otherCitationDetails">Altri dettagli:
				<sch:value-of select="$otherCitationDetails"/>
			</sch:report>
			<sch:assert test="$resourceLanguage_present">L'elemento "Lingua" non e' presente</sch:assert>
			<sch:report test="$resourceLanguage_present">Lingua:
				<sch:value-of select="$resourceLanguage"/>
			</sch:report>
			<sch:report test="$supplementalInformation">Informazioni supplementari:
				<sch:value-of select="$supplementalInformation"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Classification of spatial data and services  -->
	<!-- ############################################ -->
	<sch:pattern >
		<sch:title>Testing 'Classification of spatial data and services' elements</sch:title>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='dataset'] | //gmd:hierarchyLevel[1]/*[text()='series'] | //gmd:hierarchyLevel[1]/*[text()='Dataset'] | //gmd:hierarchyLevel[1]/*[text()='Serie'] | //gmd:hierarchyLevel[1]/*[text()='serie']">
			<sch:let name="topicCategory" value="//gmd:topicCategory/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$topicCategory">L'elemento "Categoria tematica" non e' presente</sch:assert>
			<sch:report test="$topicCategory">Categoria tematica:
				<sch:value-of select="$topicCategory"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='service'] | //gmd:hierarchyLevel[1]/*[text()='Servizio'] | //gmd:hierarchyLevel[1]/*[text()='servizio']">
			<sch:let name="serviceType" value="//srv:serviceType/*/text()"/>
			<sch:let name="serviceType_present" value="//srv:serviceType/*/text() = 'view'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'discovery'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'download'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'transformation'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'invoke'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'other'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'servizio di ricerca'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'servizio di consultazione'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'servizio di conversione'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'servizio di scaricamento'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'servizio di richiesta dei servizi'
                            or translate(//srv:serviceType/*/text(), $uppercase, $smallcase) = 'altro servizio'"/>
			<!-- assertions and report -->
			<sch:assert test="$serviceType_present">L'elemento "Tipo di servizio" non e' presente o ha un valore mancante</sch:assert>
			<sch:report test="$serviceType_present">Tipo di servizio:
				<sch:value-of select="$serviceType"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Keyword                                      -->
	<!-- ############################################ -->
	<sch:pattern >
		<sch:title>Testing 'Keyword' elements</sch:title>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='dataset'] | //gmd:hierarchyLevel[1]/*[text()='series'] | //gmd:hierarchyLevel[1]/*[text()='Dataset'] | //gmd:hierarchyLevel[1]/*[text()='Serie'] | //gmd:hierarchyLevel[1]/*[text()='serie']">
			<sch:let name="keywordValue" value="//gmd:descriptiveKeywords/*/gmd:keyword/*/text()"/>
			<sch:let name="keywordValue_SDT" value="//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Addresses' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Administrative units' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Agricultural and aquaculture facilities' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Area management/restriction/regulation zones and reporting units' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Atmospheric conditions' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Bio-geographical regions' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Buildings' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Cadastral parcels' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Coordinate reference systems' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Elevation' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Energy resources' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Environmental monitoring facilities' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Geographical grid systems' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Geographical names' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Geology' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Habitats and biotopes' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Human health and safety' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Hydrography' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Land cover' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Land use' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Meteorological geographical features' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Mineral resources' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Natural risk zones' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Oceanographic geographical features' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Orthoimagery' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Population distribution — demography' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Population distribution - demography' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Production and industrial facilities' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Protected sites' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Sea regions' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Soil' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Species distribution' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Statistical units' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Transport networks' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Utility and governmental services' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Condizioni atmosferiche' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Produzione e impianti industriali' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Copertura del suolo' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Regioni biogeografiche' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Distribuzione della popolazione - demografia' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Distribuzione della popolazione — demografia' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Regioni marine' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Distribuzione delle specie' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Reti di trasporto' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Edifici' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Risorse energetiche' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Elementi geografici meteorologici' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Risorse minerarie' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Elementi geografici oceanografici' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Salute umana e sicurezza' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Elevazione' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Servizi di pubblica utilità e servizi amministrativi' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Geologia' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Sistemi di coordinate' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Habitat e biotopi' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Sistemi di griglie geografiche' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Idrografia' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Siti protetti' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Impianti agricoli e di acquacoltura' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Suolo' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Impianti di monitoraggio ambientale' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Unità amministrative' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Indirizzi' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Unità statistiche' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Nomi geografici' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Utilizzo del territorio' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Orto immagini' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Zone a rischio naturale' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Parcelle catastali' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='Zone sottoposte a gestione/limitazioni/regolamentazione e unità con obbligo di comunicare dati'"/>
			<sch:let name="thesaurus_name" value="//gmd:descriptiveKeywords/*/gmd:thesaurusName/*/gmd:title/*/text()"/>
			<sch:let name="thesaurus_date" value="//gmd:descriptiveKeywords/*/gmd:thesaurusName/*/gmd:date/*/gmd:date/*/text()"/>
			<sch:let name="thesaurus_dateType" value="//gmd:descriptiveKeywords/*/gmd:thesaurusName/*/gmd:date/*/gmd:dateType/*/text()"/>
			<sch:assert test="$keywordValue_SDT">Per le serie e i dataset deve essere documentata almeno una parola chiave tratta dal thesaurus GEMET e corrispondente al tema INSPIRE di riferimento di cui agli allegati della Direttiva.</sch:assert>
			<sch:assert test="$keywordValue">L'elemento "Parola chiave" non e' presente</sch:assert>
			<sch:report test="$keywordValue">Parola chiave:
				<sch:value-of select="$keywordValue"/>
			</sch:report>
			<sch:report test="$thesaurus_name">Thesaurus:
				<sch:value-of select="$thesaurus_name"/>, <sch:value-of select="$thesaurus_date"/> (<sch:value-of select="$thesaurus_dateType"/>)
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='service'] | //gmd:hierarchyLevel[1]/*[text()='Servizio'] | //gmd:hierarchyLevel[1]/*[text()='servizio']">
			<sch:let name="keywordValue" value="//gmd:descriptiveKeywords/*/gmd:keyword/*/text()"/>
			<sch:let name="keywordValue_SDT" value="//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanInteractionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanCatalogueViewer' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanGeographicViewer' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanGeographicSpreadsheetViewer' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanServiceEditor' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanChainDefinitionEditor' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanWorkflowEnactmentManager' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanGeographicFeatureEditor' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanGeographicSymbolEditor' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanFeatureGeneralizationEditor' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='humanGeographicDataStructureViewer' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoManagementService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoFeatureAccessService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoMapAccessService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoCoverageAccessService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoSensorDescriptionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoProductAccessService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoFeatureTypeService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoCatalogueService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoRegistryService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoGazetteerService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoOrderHandlingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='infoStandingOrderService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='taskManagementService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='chainDefinitionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='workflowEnactmentService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='subscriptionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialProcessingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialCoordinateConversionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialCoordinateTransformationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialCoverageVectorConversionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialImageCoordinateConversionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialRectificationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialOrthorectificationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialSensorGeometryModelAdjustmentService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialImageGeometryModelConversionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialSubsettingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialSamplingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialTilingChangeService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialDimensionMeasurementService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialFeatureManipulationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialFeatureMatchingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialFeatureGeneralizationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialRouteDeterminationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialPositioningService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='spatialProximityAnalysisService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicProcessingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicGoparameterCalculationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicClassificationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicFeatureGeneralizationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicSubsettingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicSpatialCountingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicChangeDetectionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicGeographicInformationExtractionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicImageProcessingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicReducedResolutionGenerationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicImageManipulationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicImageUnderstandingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicImageSynthesisService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicMultibandImageManipulationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicObjectDetectionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicGeoparsingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='thematicGeocodingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='temporalProcessingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='temporalReferenceSystemTransformationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='temporalSubsettingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='temporalSamplingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='temporalProximityAnalysisService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='metadataProcessingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='metadataStatisticalCalculationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='metadataGeographicAnnotationService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comEncodingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comTransferService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comGeographicCompressionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comGeographicFormatConversionService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comMessagingService' or
				//gmd:descriptiveKeywords/*/gmd:keyword/*/text()='comRemoteFileAndExecutableManagement'"/>
			<!-- assertions and report -->
			<sch:assert test="$keywordValue_SDT">Per i servizi deve essere documentata la categoria o la sotto-categoria del servizio come definita nella parte D4 del Regolamento INSPIRE sui metadati (Reg. (CE) n. 1205/2008.</sch:assert>
			<sch:assert test="$keywordValue">L'elemento "Parola chiave" non e' presente</sch:assert>
			<sch:report test="$keywordValue">Parola chiave:
				<sch:value-of select="$keywordValue"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Geographic location                          -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Geographic location' elements</sch:title>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='dataset'] | //gmd:hierarchyLevel[1]/*[text()='series'] | //gmd:hierarchyLevel[1]/*[text()='Dataset'] | //gmd:hierarchyLevel[1]/*[text()='Serie'] | //gmd:hierarchyLevel[1]/*[text()='serie']">
			<sch:let name="west" value="number(//gmd:identificationInfo[1]/*/gmd:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude/*)"/>
			<sch:let name="east" value="number(//gmd:identificationInfo[1]/*/gmd:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude/*)"/>
			<sch:let name="north" value="number(//gmd:identificationInfo[1]/*/gmd:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude/*)"/>
			<sch:let name="south" value="number(//gmd:identificationInfo[1]/*/gmd:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude/*)"/>
			<!-- assertions and report -->
			<sch:assert test="(-180.00 &lt;= $west) and ( $west &lt;= 180.00)">L'elemento "Longitudine Ovest" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="(-180.00 &lt;= $west) and ( $west &lt;= 180.00)">Longitudine Ovest:
				<sch:value-of select="$west"/>
			</sch:report>
			<sch:assert test="(-180.00 &lt;= $east) and ($east &lt;= 180.00)">L'elemento "Longitudine Est" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="(-180.00 &lt;= $east) and ($east &lt;= 180.00)">Longitudine Est:
				<sch:value-of select="$east"/>
			</sch:report>
			<sch:assert test="(-90.00 &lt;= $south) and ($south &lt;= $north)">L'elemento "Latitudine Sud" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="(-90.00 &lt;= $south) and ($south &lt;= $north)">Latitudine Sud:
				<sch:value-of select="$south"/>
			</sch:report>
			<sch:assert test="($south &lt;= $north) and ($north &lt;= 90.00)">L'elemento "Latitudine Nord" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="($south &lt;= $north) and ($north &lt;= 90.00)">Latitudine Nord:
				<sch:value-of select="$north"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='service'] | //gmd:hierarchyLevel[1]/*[text()='Servizio'] | //gmd:hierarchyLevel[1]/*[text()='servizio']">
			<sch:let name="west" value="number(//gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:westBoundLongitude/*)"/>
			<sch:let name="east" value="number(//gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:eastBoundLongitude/*)"/>
			<sch:let name="north" value="number(//gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:northBoundLatitude/*)"/>
			<sch:let name="south" value="number(//gmd:identificationInfo[1]/*/srv:extent/*/gmd:geographicElement/*/gmd:southBoundLatitude/*)"/>
			<!-- assertions and report -->
			<sch:report test="(-180.00 &lt;= $west) and ( $west &lt;= 180.00)">Longitudine Ovest:
				<sch:value-of select="$west"/>
			</sch:report>
			<sch:report test="(-180.00 &lt;= $east) and ($east &lt;= 180.00)">Longitudine Est:
				<sch:value-of select="$east"/>
			</sch:report>
			<sch:report test="(-90.00 &lt;= $south) and ($south &lt;= $north)">Latitudine Sud:
				<sch:value-of select="$south"/>
			</sch:report>
			<sch:report test="($south &lt;= $north) and ($north &lt;= 90.00)">Latitudine Nord:
				<sch:value-of select="$north"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Temporal reference                           -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Temporal reference' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*">La struttura dell'xml è errata: sezione //gmd:identificationInfo non presente </sch:assert>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="temporalExtentBegin" value="gmd:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:beginPosition/text()"/>
			<sch:let name="temporalExtentEnd" value="gmd:extent/*/gmd:temporalElement/*/gmd:extent/*/gml:endPosition/text()"/>
			<sch:let name="publicationDate" value="gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='publication']/*/gmd:date/*"/>
			<sch:let name="creationDate" value="gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/*"/>
			<sch:let name="no_creationDate" value="count(gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='creation']/*/gmd:date/*)"/>
			<sch:let name="revisionDate" value="gmd:citation/*/gmd:date[./*/gmd:dateType/*/@codeListValue='revision']/*/gmd:date/*"/>

			<!-- assertions and report -->
			<sch:assert test="$no_creationDate &lt;= 1">Non ci puo' essere piu' di una istanza della data (MD_Metadata.identificationInfo[1].MD_Identification.citation.CI_Citation.date) dichiarata come data di creazione (tipo data ='creazione').</sch:assert>
			<sch:assert test="($publicationDate or $creationDate or $revisionDate)">L'elemento "Data" non e' presente</sch:assert>
			<sch:report test="$publicationDate">Data di pubblicazione: <sch:value-of select="$publicationDate"/>
			</sch:report>
			<sch:report test="$revisionDate">Data di revisione: <sch:value-of select="$revisionDate"/>
			</sch:report>
			<sch:report test="$creationDate">Data di creazione: <sch:value-of select="$creationDate"/>
			</sch:report>
			<sch:report test="$temporalExtentBegin">Estensione temporale - Data inizio: <sch:value-of select="$temporalExtentBegin"/>
			</sch:report>
			<sch:report test="$temporalExtentEnd">Estensione temporale - Data fine: <sch:value-of select="$temporalExtentEnd"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Vertical extent                          -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Vertical extent' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*">La struttura dell'xml è errata: sezione //gmd:identificationInfo non presente </sch:assert>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="minimumValue" value="gmd:extent/*/gmd:verticalElement/*/gmd:minimumValue/*/text()"/>
			<sch:let name="maximumValue" value="gmd:extent/*/gmd:verticalElement/*/gmd:maximumValue/*/text()"/>
			<sch:let name="verticalCRS" value="gmd:extent/*/gmd:verticalElement/*/gmd:verticalCRS/@xlink:href"/>
			<!-- assertions and report -->
			<sch:report test="$minimumValue">Estensione verticale - Quota minima: <sch:value-of select="$minimumValue"/>
			</sch:report>
			<sch:report test="$maximumValue">Estensione verticale - Quota massima: <sch:value-of select="$maximumValue"/>
			</sch:report>
			<sch:report test="$verticalCRS">Estensione verticale - Datum verticale: <sch:value-of select="$verticalCRS"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Distribution                         -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Distribution' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:distributionInfo/*">La struttura dell'xml è errata: sezione //gmd:distributionInfo non presente </sch:assert>
		</sch:rule>
		<sch:rule context="//gmd:distributionInfo/*">
			<sch:let name="distributionFormat_name" value="gmd:distributionFormat/*/gmd:name/*/text()"/>
			<sch:let name="distributionFormat_version" value="gmd:distributionFormat/*/gmd:version/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$distributionFormat_name">L'elemento "Formato di distribuzione - Nome formato" non e' presente</sch:assert>
			<sch:report test="$distributionFormat_name">Formato di distribuzione - Nome formato: <sch:value-of select="$distributionFormat_name"/>
			</sch:report>
			<sch:assert test="$distributionFormat_version">L'elemento "Formato di distribuzione - Versione formato" non e' presente</sch:assert>
			<sch:report test="$distributionFormat_version">Formato di distribuzione - Versione formato: <sch:value-of select="$distributionFormat_version"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Quality and validity                         -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Quality and validity' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:dataQualityInfo/*">La struttura dell'xml è errata: sezione //gmd:dataQualityInfo non presente </sch:assert>
			<sch:assert test="//gmd:identificationInfo[1]/*">La struttura dell'xml è errata: sezione //gmd:identificationInfo[1] non presente </sch:assert>
		</sch:rule>	
		<sch:rule context="//gmd:dataQualityInfo/*">
			<sch:let name="scope" value="gmd:scope/*/gmd:level/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$scope">L'elemento "Livello di qualit&#224;" non e' presente</sch:assert>
			<sch:report test="$scope">Livello di qualit&#224;
:
				<sch:value-of select="$scope"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:hierarchyLevel[1]/*[text()='dataset'] | //gmd:hierarchyLevel[1]/*[text()='series'] | //gmd:hierarchyLevel[1]/*[text()='Dataset'] | //gmd:hierarchyLevel[1]/*[text()='Serie'] | //gmd:hierarchyLevel[1]/*[text()='serie']">
			<sch:let name="positionalAccuracy_value" value="//gmd:dataQualityInfo/*/gmd:report/*/gmd:result/*/gmd:value/gco:Record/*/text()"/>
			<sch:let name="positionalAccuracy_valueUnit" value="//gmd:dataQualityInfo/*/gmd:report/*/gmd:result/*/gmd:valueUnit/*/gml:identifier/text()"/>
			<sch:let name="lineage" value="//gmd:dataQualityInfo/*/gmd:lineage/*/gmd:statement/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$positionalAccuracy_valueUnit">L'elemento "Accuratezza posizionale - Unita' di misura" non e' presente</sch:assert> 
			<sch:report test="$positionalAccuracy_valueUnit">Accuratezza posizionale - Unita' di misura:
				<sch:value-of select="$positionalAccuracy_valueUnit"/>
			</sch:report>
			<sch:assert test="$positionalAccuracy_value">L'elemento "Accuratezza posizionale - Valore" non e' presente</sch:assert>
			<sch:report test="$positionalAccuracy_value">Accuratezza posizionale - Valore:
				<sch:value-of select="$positionalAccuracy_value"/>
			</sch:report>
			<sch:assert test="$lineage">L'elemento "Genealogia" non e' presente</sch:assert>
			<sch:report test="$lineage">Genealogia:
				<sch:value-of select="$lineage"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="spatialResolution_equivalentScale" value="gmd:spatialResolution/*/gmd:equivalentScale/*/gmd:denominator"/>
			<sch:let name="spatialResolution_distance" value="gmd:spatialResolution/*/gmd:distance/*/text()"/>
			<sch:let name="spatialResolution_distance_uom" value="gmd:spatialResolution/*/gmd:distance/*/@uom"/>
			<!-- assertions and report -->
			<sch:assert test="$spatialResolution_equivalentScale | $spatialResolution_distance">L'elemento "Risoluzione spaziale (scala equivalente o distanza)" non e' presente</sch:assert>
			<sch:report test="$spatialResolution_equivalentScale">Risoluzione spaziale (scala equivalente):
				<sch:value-of select="$spatialResolution_equivalentScale"/>
			</sch:report>
			<sch:report test="$spatialResolution_distance">Risoluzione spaziale (distanza):
				<sch:value-of select="$spatialResolution_distance"/>
				<sch:value-of select="$spatialResolution_distance_uom"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Conformity                                   -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Conformity' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:dataQualityInfo/*/gmd:report/gmd:DQ_DomainConsistency">La struttura dell'xml è errata: sezione //gmd:dataQualityInfo/*/gmd:report/gmd:DQ_DomainConsistency non presente </sch:assert>
			<sch:let name="degree" value="gmd:dataQualityInfo[1]/*/gmd:report[2]/*/gmd:result[2]/*/gmd:pass/*/text()"/>
			<sch:report test="$degree='false'">Il grado di conformita' non e' stato ancora valutato.</sch:report>    
		</sch:rule>
		<!--
		<sch:rule context="//gmd:dataQualityInfo[1]"> 			
			<sch:assert test="//gmd:report/*/gmd:result">(2.8.2) Specification is missing
			</sch:assert>
		</sch:rule>
                -->

		<sch:rule context="//gmd:dataQualityInfo[1]/*/gmd:report[2]/*/gmd:result[2]">
			<sch:let name="degree" value="//gmd:pass/*/text()"/>
			<sch:let name="specification_title" value="//gmd:specification/*/gmd:title/*/text()"/>
			<sch:let name="specification_date" value="//gmd:specification/*/gmd:date/*/gmd:date/*/text()"/>
			<sch:let name="specification_dateType" value="//gmd:specification/*/gmd:date/*/gmd:dateType/*/text()"/>
			<!-- assertions and report -->
			<sch:report test="$degree">Grado di conformita':
				<sch:value-of select="$degree"/>
			</sch:report>
			<!--
                        <sch:assert test="$specification_title">(2.8.2) Specification is missing
                        </sch:assert>
                        -->
			<sch:report test="$specification_title">Conformita' - Specifiche:
				<sch:value-of select="$specification_title"/>, (<sch:value-of select="$specification_date"/>, <sch:value-of select="$specification_dateType"/>)
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Constraints related to access and use        -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Constraints related to access and use' elements</sch:title>
		<!--<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:assert test="count(gmd:resourceConstraints/*)=3">Le istanze del blocco "resourceConstraints" devono essere 3: una relativa a "Limitazione d'uso", una relativa a "LegalConstraints" e una relativa a "SecurityConstraints"</sch:assert>
		</sch:rule>-->
		<!--<sch:rule context="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*">
			<sch:let name="accessConstraints" value="gmd:accessConstraints/*/text()"/>
			<sch:let name="accessConstraints_present" value="gmd:accessConstraints/*/text() = 'copyright' or gmd:accessConstraints/*/text() = 'patent' or gmd:accessConstraints/*/text() = 'patentPending' or gmd:accessConstraints/*/text() = 'trademark' or gmd:accessConstraints/*/text() = 'license' or gmd:accessConstraints/*/text() = 'intellectualPropertyRights' or gmd:accessConstraints/*/text() = 'restricted' or gmd:accessConstraints/*/text() = 'otherRestrictions' or gmd:accessConstraints/*/text() = 'Proprietà intellettuale dei dati' or gmd:accessConstraints/*/text() = 'Brevetto' or gmd:accessConstraints/*/text() = 'In attesa di brevetto' or gmd:accessConstraints/*/text() = 'Marchio registrato' or gmd:accessConstraints/*/text() = 'Licenza' or gmd:accessConstraints/*/text() = 'Sfruttamento economico della proprietà intellettuale' or gmd:accessConstraints/*/text() = 'Dato a conoscibilità limitata' or gmd:accessConstraints/*/text() = 'altri vincoli'"/>
			<sch:let name="useConstraints" value="gmd:useConstraints/*/text()"/>
			<sch:let name="useConstraints_present" value="gmd:useConstraints/*/text() = 'copyright' or gmd:useConstraints/*/text() = 'patent' or gmd:useConstraints/*/text() = 'patentPending' or gmd:useConstraints/*/text() = 'trademark' or gmd:useConstraints/*/text() = 'license' or gmd:useConstraints/*/text() = 'intellectualPropertyRights' or gmd:useConstraints/*/text() = 'restricted' or gmd:useConstraints/*/text() = 'otherRestrictions' or gmd:useConstraints/*/text() = 'Proprietà intellettuale dei dati' or gmd:useConstraints/*/text() = 'Brevetto' or gmd:useConstraints/*/text() = 'In attesa di brevetto' or gmd:useConstraints/*/text() = 'Marchio registrato' or gmd:useConstraints/*/text() = 'Licenza' or gmd:useConstraints/*/text() = 'Sfruttamento economico della proprietà intellettuale' or gmd:useConstraints/*/text() = 'Dato a conoscibilità limitata' or gmd:useConstraints/*/text() = 'altri vincoli'"/>
			<sch:let name="classification" value="gmd:classification/*/text()"/>
			<sch:let name="classification_present" value="gmd:classification/*/text() = 'unclassified' or gmd:classification/*/text() = 'restricted' or gmd:classification/*/text() = 'confidential' or gmd:classification/*/text() = 'secret' or gmd:classification/*/text() = 'topSecret' or gmd:classification/*/text() = 'Non classificato' or gmd:classification/*/text() = 'Limitato' or gmd:classification/*/text() = 'Riservato' or gmd:classification/*/text() = 'Segreto' or gmd:classification/*/text() = 'Top secret'"/>
			<sch:let name="otherConstraints" value="gmd:otherConstraints/*/text()"/>
			<sch:assert test="$accessConstraints_present">L'elemento "Vincoli di accesso" non e' presente</sch:assert>
			<sch:report test="$accessConstraints_present">Vincoli di accesso:
                <sch:value-of select="$accessConstraints"/>
			</sch:report>
			<sch:assert test="$useConstraints_present">L'elemento "Vincoli di fruibilità" non e' presente</sch:assert>
			<sch:report test="$useConstraints_present">Vincoli di fruibilità:
                <sch:value-of select="$useConstraints"/>
			</sch:report>
			<sch:assert test="$classification_present">L'elemento "Vincoli di sicurezza" non e' presente</sch:assert>
			<sch:report test="$classification_present">Vincoli di sicurezza:
                <sch:value-of select="$classification"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:otherConstraints/*">
			<sch:let name="accessConstraints_value" value="../../gmd:accessConstraints/*/text()"/>
			<sch:assert test="$accessConstraints_value = 'otherRestrictions' or $accessConstraints_value = 'altri vincoli'"> Il valore dell'elemento "Vincoli di accesso" deve essere "Altri vincoli" (otherRestrictions) se e' presente l'elemento "Altri vincoli".</sch:assert>
			<sch:report test="$accessConstraints_value = 'otherRestrictions' or $accessConstraints_value = 'Altri vincoli'">Altri vincoli:
                <sch:value-of select="."/>
			</sch:report>
		</sch:rule>-->
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:accessConstraints">La struttura dell'xml è errata: sezione //gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:accessConstraints non presente </sch:assert>
		</sch:rule>	
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="useLimitation" value="gmd:resourceConstraints/*/gmd:useLimitation/*/text()"/>
			<sch:let name="useLimitation_count" value="count(gmd:resourceConstraints/*/gmd:useLimitation/*/text())"/>
			<sch:let name="exist_accessConstraints" value="gmd:resourceConstraints/*/gmd:accessConstraints/*/text()"/>
			<sch:let name="exist_useConstraints" value="gmd:resourceConstraints/*/gmd:useConstraints/*/text()"/>
			<sch:let name="exist_classification" value="gmd:resourceConstraints/*/gmd:classification/*/text()"/>
			<sch:assert test="$useLimitation_count">L'elemento "Limitazione d'uso" non e' presente</sch:assert>
			<sch:report test="$useLimitation_count">Limitazione d'uso:
				<sch:value-of select="$useLimitation"/>
			</sch:report>
			<sch:assert test="$exist_accessConstraints">L'elemento "Vincoli di accesso" non e' presente</sch:assert>
			<sch:assert test="$exist_useConstraints">L'elemento "Vincoli di fruibilita' " non e' presente</sch:assert>
			<sch:assert test="$exist_classification">L'elemento "Vincoli di sicurezza" non e' presente</sch:assert>
		</sch:rule>
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:accessConstraints/*">
			<sch:let name="accessConstraints" value="text()"/>
			<sch:let name="accessConstraints_present" value="text() = 'copyright' or text() = 'patent' or text() = 'patentPending' or text() = 'trademark' or text() = 'license' or text() = 'intellectualPropertyRights' or text() = 'restricted' or text() = 'otherRestrictions' or translate(text(), $uppercase, $smallcase) = 'proprietà intellettuale dei dati' or translate(text(), $uppercase, $smallcase) = 'brevetto' or translate(text(), $uppercase, $smallcase) = 'in attesa di brevetto' or translate(text(), $uppercase, $smallcase) = 'marchio registrato' or translate(text(), $uppercase, $smallcase) = 'licenza' or translate(text(), $uppercase, $smallcase) = 'sfruttamento economico della proprietà intellettuale' or translate(text(), $uppercase, $smallcase) = 'dato a conoscibilità limitata' or translate(text(), $uppercase, $smallcase) = 'altri vincoli'"/>
			<sch:let name="useConstraints" value="../../gmd:useConstraints/*/text()"/>
			<sch:let name="useConstraints_present" value="../../gmd:useConstraints/*/text() = 'copyright' or ../../gmd:useConstraints/*/text() = 'patent' or ../../gmd:useConstraints/*/text() = 'patentPending' or ../../gmd:useConstraints/*/text() = 'trademark' or ../../gmd:useConstraints/*/text() = 'license' or ../../gmd:useConstraints/*/text() = 'intellectualPropertyRights' or ../../gmd:useConstraints/*/text() = 'restricted' or ../../gmd:useConstraints/*/text() = 'otherRestrictions' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'proprietà intellettuale dei dati' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'brevetto' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'in attesa di brevetto' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'marchio registrato' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'licenza' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'sfruttamento economico della proprietà intellettuale' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'dato a conoscibilità limitata' or translate(../../gmd:useConstraints/*/text(), $uppercase, $smallcase) = 'altri vincoli'"/>
			<sch:let name="otherConstraints" value="../../gmd:otherConstraints/*/text()"/>

			<sch:assert test="$accessConstraints_present">L'elemento "Vincoli di accesso" non e' presente</sch:assert>
			<sch:report test="$accessConstraints_present">Vincoli di accesso:
				<sch:value-of select="$accessConstraints"/>
			</sch:report>
			<sch:assert test="$useConstraints_present">L'elemento "Vincoli di fruibilità" non e' presente</sch:assert>
			<sch:report test="$useConstraints_present">Vincoli di fruibilità:
				<sch:value-of select="$useConstraints"/>
			</sch:report>
		</sch:rule>

		<!-- Altri vincoli solo se access è Altri Vincoli -->
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:otherConstraints/*">
			<sch:let name="accessConstraints_value" value="../../gmd:accessConstraints/*/text()"/>
			<sch:assert test="$accessConstraints_value = 'otherRestrictions' or translate($accessConstraints_value, $uppercase, $smallcase) = 'altri vincoli'">Se e' presente l'elemento "Altri vincoli" il valore dell'elemento "Vincoli di accesso" deve essere "Altri vincoli" (otherRestrictions).</sch:assert>
			<sch:report test="$accessConstraints_value = 'otherRestrictions' or translate($accessConstraints_value, $uppercase, $smallcase) = 'altri vincoli'">Altri vincoli:
				<sch:value-of select="."/>
			</sch:report>
		</sch:rule >
		
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:resourceConstraints/*/gmd:classification/*">
			<sch:let name="classification" value="text()"/>
			<sch:let name="classification_present" value="text() = 'unclassified' or text() = 'restricted' or text() = 'confidential' or text() = 'secret' or text() = 'topSecret' or translate(text(), $uppercase, $smallcase) = 'non classificato' or translate(text(), $uppercase, $smallcase) = 'limitato' or translate(text(), $uppercase, $smallcase) = 'riservato' or translate(text(), $uppercase, $smallcase) = 'segreto' or translate(text(), $uppercase, $smallcase) = 'top secret'"/>
			<!--<sch:assert test="$classification_present">L'elemento "Vincoli di sicurezza" non e' presente</sch:assert>-->
			<sch:report test="$classification_present">Vincoli di sicurezza:
				<sch:value-of select="$classification"/>
			</sch:report>
		</sch:rule>		

		<!--<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="useLimitation" value="gmd:resourceConstraints/*/gmd:useLimitation/*/text()"/>
			<sch:let name="useLimitation_count" value="count(gmd:resourceConstraints/*/gmd:useLimitation/*/text())"/>
			<sch:assert test="$useLimitation_count">L'elemento "Limitazione d'uso" non e' presente</sch:assert>
			<sch:report test="$useLimitation_count">Limitazione d'uso:
                <sch:value-of select="$useLimitation"/>
			</sch:report>
			-->
		<!--<sch:assert test="$useLimitation">L'elemento "Limitazione d'uso" non e' presente</sch:assert>
			<sch:report test="$useLimitation">Limitazione d'uso:
                <sch:value-of select="$useLimitation"/>
			</sch:report>-->
		<!--
		</sch:rule>-->		
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Responsible organisation                  -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Responsible organisation' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*/gmd:citation">La struttura dell'xml è errata: sezione //gmd:identificationInfo[1]/*/gmd:citation non presente </sch:assert>
		</sch:rule>	
		<sch:rule context="//gmd:identificationInfo[1]/*/gmd:citation">
			<sch:let name="organisationName" value="*/gmd:citedResponsibleParty/*/gmd:organisationName/*/text()"/>
			<sch:let name="role" value="translate(*/gmd:citedResponsibleParty/*/gmd:role/*/text(),$uppercase,$smallcase)"/>
			<sch:let name="role_present" value="$role = 'resourceprovider' or
												$role = 'custodian' or
												$role = 'owner' or
												$role = 'user' or
												$role = 'distributor' or
												$role = 'originator' or
												$role = 'pointofcontact' or
												$role = 'principalinvestigator' or
												$role = 'processor' or
												$role = 'publisher' or
												$role = 'author' or
												$role = 'fornitore della risorsa' or
												$role = 'custode' or
												$role = 'proprietario' or
												$role = 'utente' or
												$role = 'distributore' or
												$role = 'punto di contatto' or
												$role = 'editore' or
												$role = 'autore' or
												$role = 'responsabile del trattamento' or
												$role = 'responsabile principale delle ricerche' or
												$role = 'ideatore'"/>
			<sch:let name="telephone" value="*/gmd:citedResponsibleParty/*/gmd:contactInfo/*/gmd:phone/*/gmd:voice/*/text()"/>
			<sch:let name="onlineResource" value="*/gmd:citedResponsibleParty/*/gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage/*/text()"/>
			<sch:let name="emailAddress" value="*/gmd:citedResponsibleParty/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress/*/text()"/>
			<sch:let name="almenouno" value="*/gmd:citedResponsibleParty/*/gmd:contactInfo/*/gmd:phone/*/gmd:voice/*/text() or */gmd:citedResponsibleParty/*/gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage/*/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$organisationName">L'elemento "Responsabile - Nome Ente" non e' presente</sch:assert>
			<sch:report test="$organisationName">Responsabile - Nome Ente:
				<sch:value-of select="$organisationName"/>
			</sch:report>
			<sch:assert test="$almenouno">L'elemento "Responsabile - Telefono" non e' presente. Esso deve essere documentato se non e' presente neanche l'elemento "Responsabile - Sito web"</sch:assert>
			<sch:report test="$almenouno">Responsabile - Telefono , Sito web:
				<sch:value-of select="$almenouno"/>
			</sch:report>

			<sch:assert test="$emailAddress">L'elemento "Responsabile - E-mail" non e' presente </sch:assert>
			<sch:report test="$emailAddress">Responsabile - E-mail:
				<sch:value-of select="$emailAddress"/>
			</sch:report>
			<sch:assert test="$role_present">L'elemento "Responsabile - Ruolo" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$role_present">Responsabile - Ruolo:
				<sch:value-of select="$role"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Responsible organisation - point of contact                    -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Responsible organisation' (point of contact) elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:identificationInfo[1]/*">La struttura dell'xml è errata: sezione //gmd:identificationInfo non presente </sch:assert>
		</sch:rule>	
		<sch:rule context="//gmd:identificationInfo[1]/*">
			<sch:let name="organisationName" value="gmd:pointOfContact/*/gmd:organisationName/*/text()"/>
			<sch:let name="role" value="translate(gmd:pointOfContact/*/gmd:role/*/text(),$uppercase,$smallcase)"/>
			<sch:let name="role_present" value="$role = 'resourceprovider' or
												$role = 'custodian' or
												$role = 'owner' or
												$role = 'user' or
												$role = 'distributor' or
												$role = 'originator' or
												$role = 'pointofcontact' or
												$role = 'principalinvestigator' or
												$role = 'processor' or
												$role = 'publisher' or
												$role = 'author' or
												$role = 'fornitore della risorsa' or
												$role = 'custode' or
												$role = 'proprietario' or
												$role = 'utente' or
												$role = 'distributore' or
												$role = 'punto di contatto' or
												$role = 'editore' or
												$role = 'autore' or
												$role = 'responsabile del trattamento' or
												$role = 'responsabile principale delle ricerche' or
												$role = 'ideatore'"/>
			<sch:let name="telephone" value="gmd:pointOfContact/*/gmd:contactInfo/*/gmd:phone/*/gmd:voice/*/text()"/>
			<sch:let name="onlineResource" value="gmd:pointOfContact/*/gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage/*/text()"/>
			<sch:let name="emailAddress" value="gmd:pointOfContact/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress/*/text()"/>
			<sch:let name="almenouno" value="$telephone or $onlineResource"/>
			<!-- assertions and report -->
			<sch:assert test="$organisationName">L'elemento "Punto di contatto - Nome Ente" non e' presente</sch:assert>
			<sch:report test="$organisationName">Punto di contatto - Nome Ente:
				<sch:value-of select="$organisationName"/>
			</sch:report>
			<sch:assert test="$almenouno">L'elemento "Punto di contatto - Telefono" non e' presente. Esso deve essere documentato se non e' presente neanche l'elemento "Punto di contatto - Sito web"</sch:assert>
			<sch:report test="$almenouno">Punto di contatto - Telefono:
				<sch:value-of select="$almenouno"/>
			</sch:report>

			<sch:assert test="$emailAddress">L'elemento "Punto di contatto - E-mail" non e' presente </sch:assert>
			<sch:report test="$emailAddress">Punto di contatto - E-mail:
				<sch:value-of select="$emailAddress"/>
			</sch:report>
			<sch:assert test="$role_present">L'elemento "Punto di contatto - Ruolo" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$role_present">Punto di contatto - Ruolo:
				<sch:value-of select="$role"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Responsible organisation - distributor                   -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Responsible organisation' (Distributor) elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:distributionInfo/*">La struttura dell'xml è errata: sezione //gmd:distributionInfo non presente </sch:assert>
		</sch:rule>	
		<sch:rule context="//gmd:distributionInfo/*">
			<sch:let name="organisationName" value="gmd:distributor/*/gmd:distributorContact/*/gmd:organisationName/*/text()"/>
			<sch:let name="role" value="translate(gmd:distributor/*/gmd:distributorContact/*/gmd:role/*/text(),$uppercase,$smallcase)"/>
			<sch:let name="role_present" value="$role = 'resourceProvider' or
												$role = 'custodian' or
												$role = 'owner' or
												$role = 'user' or
												$role = 'distributor' or
												$role = 'originator' or
												$role = 'pointofcontact' or
												$role = 'principalinvestigator' or
												$role = 'processor' or
												$role = 'publisher' or
												$role = 'author' or
												$role = 'fornitore della risorsa' or
												$role = 'custode' or
												$role = 'proprietario' or
												$role = 'utente' or
												$role = 'distributore' or
												$role = 'punto di contatto' or
												$role = 'editore' or
												$role = 'autore' or
												$role = 'responsabile del trattamento' or
												$role = 'responsabile principale delle ricerche' or
												$role = 'ideatore'"/>
			<sch:let name="telephone" value="gmd:distributor/*/gmd:distributorContact/*/gmd:contactInfo/*/gmd:phone/*/gmd:voice/*/text()"/>
			<sch:let name="onlineResource" value="gmd:distributor/*/gmd:distributorContact/*/gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage/*/text()"/>
			<sch:let name="emailAddress" value="gmd:distributor/*/gmd:distributorContact/*/gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress/*/text()"/>
			<sch:let name="almenouno" value="$telephone or $onlineResource"/>
			<!-- assertions and report -->
			<sch:assert test="$organisationName">L'elemento "Distributore - Nome Ente" non e' presente</sch:assert>
			<sch:report test="$organisationName">Distributore - Nome Ente:
				<sch:value-of select="$organisationName"/>
			</sch:report>
			<sch:assert test="$almenouno">L'elemento "Distributore - Telefono" non e' presente. Esso deve essere documentato se non e' presente neanche l'elemento "Distributore - Sito web"</sch:assert>
			<sch:report test="$almenouno">Distributore - Telefono:
				<sch:value-of select="$almenouno"/>
			</sch:report>

			<sch:assert test="$emailAddress">L'elemento "Distributore - E-mail" non e' presente </sch:assert>
			<sch:report test="$emailAddress">Distributore - E-mail:
				<sch:value-of select="$emailAddress"/>
			</sch:report>
			<sch:assert test="$role_present">L'elemento "Distributore - Ruolo" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$role_present">Distributore - Ruolo:
				<sch:value-of select="$role"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Reference System                         -->
	<!-- Viene aggiunto anche il sistema di riferimento dell'Emilia Romagna -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Reference System' elements</sch:title>
		<sch:rule context="/*">
			<sch:assert test="//gmd:referenceSystemInfo/*">La struttura dell'xml è errata: sezione //gmd:referenceSystemInfo non presente </sch:assert>
		</sch:rule>		
		<sch:rule context="//gmd:referenceSystemInfo/*">
			<sch:let name="RS_code" value="translate(gmd:referenceSystemIdentifier/*/gmd:code/*/text(), $smallcase, $uppercase)"/>
			<sch:let name="RS_code_present" value="$RS_code='WGS84' or
																			$RS_code='ETRS89' or
																			$RS_code='ETRS89/ETRS-LAEA' or
																			$RS_code='ETRS89/ETRS-LCC' or
																			$RS_code='ETRS89/ETRS-TM32' or
																			$RS_code='ETRS89/ETRS-TM33' or
																			$RS_code='ROMA40/EST' or 
																			$RS_code='ROMA40/OVEST' or 
																			$RS_code='ED50/UTM 32N' or 
																			$RS_code='ED50/UTM 33N' or 
																			$RS_code='IGM95/UTM 32N' or 
																			$RS_code='IGM95/UTM 33N' or
																			$RS_code='WGS84/UTM 32N' or 
																			$RS_code='WGS84/UTM 33N' or 
																			$RS_code='WGS84/UTM 34N' or
																			$RS_code='BESSEL/CASSINI-SOLDNER' or 
																			$RS_code='BESSEL/SANSON-FLAMSTEED' or 
																			$RS_code='CATASTO / LOCALE' or 
																			$RS_code='ROMA40' or 
																			$RS_code='ROMA40/ROMA' or 
																			$RS_code='ED50' or 
																			$RS_code='IGM95' or 
																			$RS_code='RETE ALTIMETRICA NAZIONALE' or 
																			$RS_code='WGS84/3D' or 
																			$RS_code='ITRS' or 
																			$RS_code='ITRFXX' or 
																			$RS_code='IGSXX' or 
																			$RS_code='IGB00' or 
																			$RS_code='ETRF89' or 
																			$RS_code='ETRF00' or 
																			$RS_code='ETRS89/UTM-ZONE32N' or 
																			$RS_code='ETRS89/UTM-ZONE33N' or 
																			$RS_code='LIVELLO MEDIO DELLE BASSE MAREE SIZIGIALI' or
																			$RS_code='LIVELLO MEDIO DELLE ALTE MAREE SIZIGIALI' or 
																			$RS_code='LIVELLO MEDIO LAGO' or 
																			$RS_code='MONTE MARIO / TM EMILIA-ROMAGNA' or
																			$RS_code='RDN2008' or
																			$RS_code='RDN2008 / TM32' or
																			$RS_code='NON DEFINITO' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4936' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4258' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3035' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3034' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3038' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3039' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3040' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3041' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3042' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3043' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3044' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3045' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3046' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3047' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3048' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3049' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3050' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3051' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/5730' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/5861' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/5715' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/7409' or
																			$RS_code='http://codes.wmo.int/grib2/codeflag/4.2/_0-3-3' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/7409' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4326' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4258' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3035' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3034' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3044' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3045' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3004' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3003' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/23032' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/23033' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3064' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/3065' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/32632' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/32633' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/32634' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4265' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4826' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4230' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4670' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/4979' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/25832' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/25833' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/6706' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/5659' or
																			$RS_code='http://www.opengis.net/def/crs/epsg/0/6707'"/>
			<sch:let name="RS_codeSpace" value="gmd:referenceSystemIdentifier/*/gmd:codeSpace/*/text()='http://www.epsg-registry.org/'"/>
			<sch:let name="RS_codeSpaceIsOK" value="gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4326' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4258' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3035' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3034' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3044' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3045' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3004' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3003' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='23032' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='23033' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3064' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='3065' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='32632' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='32633' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='32634' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4265' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4826' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4230' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4670' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='4979' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='25832' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='25833' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='5659' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='6706' or
													gmd:referenceSystemIdentifier/*/gmd:code/*/text()='6707'"/>
			<!-- assertions and report -->
			<sch:assert test="$RS_code_present or ($RS_codeSpace and $RS_codeSpaceIsOK)">L'elemento "Sistema di riferimento" non e' presente o ha un valore sbagliato</sch:assert>

			<sch:report test="$RS_code_present or ($RS_codeSpace and $RS_codeSpaceIsOK)">Sistema di riferimento:
				<sch:value-of select="$RS_code"/>
			</sch:report>
			<sch:report test="$RS_codeSpace">Sistema di riferimento - codeSpace:
				<sch:value-of select="$RS_codeSpace"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Resource Maintenance                        -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Testing 'Resource Maintenance' elements</sch:title>
		<!-- Opzionale
		<sch:rule context="/*">
			<sch:assert test="//gmd:resourceMaintenance/*">La struttura dell'xml è errata: sezione //gmd:resourceMaintenance non presente </sch:assert>
		</sch:rule>
		-->
		<sch:rule context="//gmd:resourceMaintenance/*">
			<sch:let name="maintenanceAndUpdateFrequency" value="gmd:maintenanceAndUpdateFrequency/*/text()"/>
			<sch:let name="maintenanceAndUpdateFrequency_present" value="gmd:maintenanceAndUpdateFrequency/*/text() ='continual' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='daily' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='weekly' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='fortnightly' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='monthtly' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='quarterly' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='biannually' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='annually' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='asNeeded' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='irregular' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='notPlanned' or
																												gmd:maintenanceAndUpdateFrequency/*/text() ='unknown' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='in maniera continua' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='giornalmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='settimanalmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='ogni quindici giorni' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='mensilmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='trimestralmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='due volte all&amp;apos;anno' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='annualmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='quando necessario' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='irregolarmente' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='non pianificato' or
																												translate(gmd:maintenanceAndUpdateFrequency/*/text(), $uppercase, $smallcase) ='sconosciuto'"/>
			<!-- assertions and report -->
			<sch:report test="$maintenanceAndUpdateFrequency_present">Frequenza di aggiornamento:
				<sch:value-of select="$maintenanceAndUpdateFrequency"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>
	<!-- ############################################ -->
	<!-- Metadata on metadata                         -->
	<!-- ############################################ -->
	<sch:pattern >
		<sch:rule context="/*">
			<sch:assert test="gmd:contact/*">La struttura dell'xml è errata: sezione gmd:MD_Metadata/gmd:contact non presente </sch:assert>
		</sch:rule>
		<sch:title>Testing 'Metadata on metadata' elements</sch:title>
		<sch:rule context="/">
			<sch:let name="fileIdentifier" value="gmd:MD_Metadata/gmd:fileIdentifier/*/text()"/>
			<sch:let name="parentIdentifier" value="gmd:MD_Metadata/gmd:parentIdentifier/*/text()"/>
			<sch:let name="characterSet" value="gmd:MD_Metadata/gmd:characterSet/*/text()"/>
			<sch:let name="dateStamp" value="gmd:MD_Metadata/gmd:dateStamp/*/text()"/>
			<sch:let name="metadataStandardName" value="gmd:MD_Metadata/gmd:metadataStandardName/*/text()"/>
			<sch:let name="metadataStandardVersion" value="gmd:MD_Metadata/gmd:metadataStandardVersion/*/text()"/>
			<sch:let name="language" value="gmd:MD_Metadata/gmd:language/*/text()"/>
			<sch:let name="language_present" value="translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='bul' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='ita' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='cze' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='lav' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='dan' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='lit' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='dut' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='mlt' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='eng' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='pol' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='est' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='por' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='fin' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='rum' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='fre' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='slo' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='ger' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='slv' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='gre' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='spa' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='hun' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='swe' or
                            translate(gmd:MD_Metadata/gmd:language/*/text(), $uppercase, $smallcase)='gle'"/>
			<!-- assertions and report -->
			<sch:assert test="$fileIdentifier">L'elemento "Identificatore del file" non e' presente</sch:assert>
			<sch:report test="$fileIdentifier">Identificatore del file:
				<sch:value-of select="$fileIdentifier"/>
			</sch:report>
			<sch:assert test="$parentIdentifier">L'elemento "Id file precedente" non e' presente</sch:assert>
			<sch:report test="$parentIdentifier">Id file precedente:
				<sch:value-of select="$parentIdentifier"/>
			</sch:report>
			<sch:report test="$characterSet">Set dei caratteri dei metadati:
				<sch:value-of select="$characterSet"/>
			</sch:report>
			<sch:assert test="$dateStamp">L'elemento "Data dei metadati" non e' presente</sch:assert>
			<sch:report test="$dateStamp">Data dei metadati:
				<sch:value-of select="$dateStamp"/>
			</sch:report>
			<sch:assert test="$metadataStandardName">L'elemento "Nome dello Standard" non e' presente</sch:assert>
			<sch:report test="$metadataStandardName">Nome dello Standard:
				<sch:value-of select="$metadataStandardName"/>
			</sch:report>
			<sch:assert test="$metadataStandardVersion">L'elemento "Versione dello Standard" non e' presente</sch:assert>
			<sch:report test="$metadataStandardVersion">Versione dello Standard:
				<sch:value-of select="$metadataStandardVersion"/>
			</sch:report>
			<sch:assert test="$language_present">L'elemento "Lingua dei metadati" non e' presente o ha un valore sbagliato</sch:assert>
			<sch:report test="$language_present">Lingua dei metadati:
				<sch:value-of select="$language"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="gmd:MD_Metadata/gmd:contact/*">
			<sch:let name="organisationName" value="gmd:organisationName/*/text()"/>
			<sch:let name="role" value="gmd:role/*/text()"/>
			<sch:let name="role_present" value="gmd:role/*/text() = 'pointOfContact' or translate(gmd:role/*/text(), $uppercase, $smallcase)='punto di contatto'"/>
			<sch:let name="telephone" value="gmd:contactInfo/*/gmd:phone/*/gmd:voice/*/text()"/>
			<sch:let name="onlineResource" value="gmd:contactInfo/*/gmd:onlineResource/*/gmd:linkage/*/text()"/>
			<sch:let name="emailAddress" value="gmd:contactInfo/*/gmd:address/*/gmd:electronicMailAddress/*/text()"/>
			<sch:let name="almenouno" value="$telephone or $onlineResource"/>
			<!-- assertions and report -->
			<sch:assert test="$organisationName">L'elemento "Responsabile dei metadati - Nome Ente" non e' presente</sch:assert>
			<sch:report test="$organisationName">Responsabile dei metadati - Nome Ente:
				<sch:value-of select="$organisationName"/>
			</sch:report>
			<sch:assert test="$almenouno">L'elemento "Responsabile dei metadati - Telefono" non e' presente. Esso deve essere documentato se non e' presente neanche l'elemento "Responsabile dei metadati - Sito web"</sch:assert>
			<sch:report test="$almenouno">Responsabile dei metadati - Telefono:
				<sch:value-of select="$almenouno"/>
			</sch:report>

			<sch:assert test="$emailAddress">L'elemento "Responsabile dei metadati - E-mail" non e' presente</sch:assert>
			<sch:report test="$emailAddress">Responsabile dei metadati - E-mail:
				<sch:value-of select="$emailAddress"/>
			</sch:report>
			<sch:assert test="$role_present">L'elemento "Responsabile dei metadati - Ruolo" non è presente o ha un valore sbagliato. Il valore del ruolo del responsabile dei metadati deve essere 'Punto di contatto' ('pointOfContact')</sch:assert>
			<sch:report test="$role_present">Responsabile dei metadati - Ruolo:
				<sch:value-of select="$role"/>
			</sch:report>
		</sch:rule>
	</sch:pattern>

	<!-- ############################################ -->
	<!-- Conformity - Details mapping                 -->
	<!-- ############################################ 
	<sch:pattern name="Conformity Details">
		<sch:title>Testing 'Conformity' elements in details</sch:title>
		<sch:rule context="//gmd:dataQualityInfo[1]">			
			<sch:assert test="//gmd:report/gmd:DQ_DomainConsistency">(3.4.2) There shall be at least one conformity statement (instance of DQ_DomainConsistency where codeSpace is INSPIRE)</sch:assert>    
		</sch:rule>      
		<sch:rule context="//gmd:dataQualityInfo[1]/*/gmd:report[1]/gmd:DQ_DomainConsistency[1]">		
                        <sch:let name="domainConsistency" value="//gmd:codeSpace/*/text()"/>
			<sch:assert test="$domainConsistency = 'INSPIRE'">(3.4.2) There shall be at least one conformity statement (instance of DQ_DomainConsistency where codeSpace is INSPIRE)</sch:assert>    
		</sch:rule>
	</sch:pattern>
        -->
	<!-- ############################################ -->
	<!-- Dati raster                                  -->
	<!-- ############################################ -->
	<sch:pattern>
		<sch:title>Raster Georettificati - Georeferibili</sch:title>
		<sch:rule context="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:numberOfDimensions/*">
			<sch:let name="numDim" value="../gco:Integer/text()"/>
			<sch:let name="conteggioDim" value="count(/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:axisDimensionProperties/*)"/>
			<sch:let name="cellGeometry" value="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:cellGeometry/gmd:MD_CellGeometryCode/@codeListValue"/>
			<sch:let name="transformation" value="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/*/gmd:transformationParameterAvailability/gco:Boolean"/>
			<!-- assertions and report -->
			<sch:assert test="$numDim">Il numero di dimensioni non è presente</sch:assert>
			<sch:report test="$numDim">Il numero di dimensioni: <sch:value-of select="$numDim"/>
			</sch:report>
			<sch:assert test="not($numDim = conteggioDim)">Il numero di dimensioni non corrisponde a quato indicato </sch:assert>
			<sch:report test="$conteggioDim">Conteggio di dimensioni: <sch:value-of select="$conteggioDim"/>
			</sch:report>
			<sch:assert test="$cellGeometry">La geometria della cella non è presente</sch:assert>
			<sch:report test="$cellGeometry">La geometria della cella: <sch:value-of select="$cellGeometry"/>
			</sch:report>
			<sch:assert test="$transformation">La disponibilita' dei coefficenti di trasformazione non è presente</sch:assert>
			<sch:report test="$transformation">La disponibilita' dei coefficenti di trasformazione: <sch:value-of select="$transformation"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georectified/gmd:numberOfDimensions/*">
			<sch:let name="checkPoint" value="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georectified/gmd:checkPointAvailability/gco:Boolean/text()"/>
			<sch:let name="poinInPixel" value="../../gmd:pointInPixel/gmd:MD_PixelOrientationCode/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$checkPoint">La disponibilita' dei check point non è presente</sch:assert>
			<sch:report test="$checkPoint">La disponibilita' dei check point: <sch:value-of select="$checkPoint"/>
			</sch:report>
			<sch:assert test="$poinInPixel">Punto del Pixel non è presente</sch:assert>
			<sch:report test="$poinInPixel">La disponibilita' del punto del pixel: <sch:value-of select="$poinInPixel"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georectified/gmd:axisDimensionProperties[*]">
			<sch:let name="tipo" value="gmd:MD_Dimension/gmd:dimensionName/gmd:MD_DimensionNameTypeCode/@codeListValue"/>
			<sch:let name="valoreDim" value="gmd:MD_Dimension/*/gco:Integer/text()"/>
			<!-- assertions and report -->
			<sch:assert test="$tipo">Il tipo di dimensioni non è presente</sch:assert>
			<sch:report test="$tipo">tipo di dimensioni: <sch:value-of select="$tipo"/>
			</sch:report>
			<sch:assert test="$valoreDim">Il valoreDim di dimensioni non è presente</sch:assert>
			<sch:report test="$valoreDim">valoreDim di dimensioni: <sch:value-of select="$valoreDim"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georectified/*/gml:Point">
			<!--<sch:let name="valore_id" value="./@gml:id"/>
			<sch:let name="conteggio_id" value="count(//gml:Point[@gml:id=$valore_id])"/>-->
			<sch:let name="coordinata" value="gml:coordinates/text()"/>
			<!--<sch:assert test="$conteggio_id=1">Sono stati trovati valori non univoci del point <sch:value-of select="$valore_id"/> <sch:value-of select="$conteggio_id"/></sch:assert>
			<sch:report test="$conteggio_id=1">Valore ID del Point <sch:value-of select="$valore_id"/></sch:report>-->
			<sch:assert test="$coordinata">La coordinata non è presente</sch:assert>
			<sch:report test="$coordinata">Coordinata: <sch:value-of select="$coordinata"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:contentInfo/gmd:MD_ImageDescription/gmd:attributeDescription/*">
			<sch:let name="recordType" value="../gco:RecordType/text()"/>
			<sch:assert test="$recordType">La descrizione degli attributi non è presente</sch:assert>
			<sch:report test="$recordType">La descrizione degli attributi: <sch:value-of select="$recordType"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:contentInfo/gmd:MD_ImageDescription/gmd:contentType/*">
			<sch:let name="contentType" value="../gmd:MD_CoverageContentTypeCode/@codeListValue"/>
			<sch:assert test="$contentType">Il tipo di contenuto non è presente</sch:assert>
			<sch:report test="$contentType">Tipo di contenuto: <sch:value-of select="$contentType"/>
			</sch:report>
		</sch:rule>
		<sch:rule context="/gmd:MD_Metadata/gmd:spatialRepresentationInfo/gmd:MD_Georeferenceable/gmd:numberOfDimensions/*">
			<sch:let name="controlPoint" value="../../gmd:controlPointAvailability/gco:Boolean/text()"/>
			<sch:let name="orientationPoint" value="../../gmd:orientationParameterAvailability/gco:Boolean/text()"/>
			<sch:let name="georeferencedParameters" value="../../gmd:georeferencedParameters/gco:Record/text()"/>

			<!-- assertions and report -->
			<sch:assert test="$controlPoint">La disponibilita' dei control point non è presente</sch:assert>
			<sch:report test="$controlPoint">La disponibilita' dei control point: <sch:value-of select="$controlPoint"/>
			</sch:report>
			<sch:assert test="$orientationPoint">La disponibilita' dei parametri di orientamento non è presente</sch:assert>
			<sch:report test="$orientationPoint">La disponibilita' dei parametri di orientamento: <sch:value-of select="$orientationPoint"/>
			</sch:report>
			<sch:assert test="$georeferencedParameters">La disponibilita' dei parametri per la georeferenziazione non è presente</sch:assert>
			<sch:report test="$georeferencedParameters">La disponibilita' dei parametri per la georeferenziazione: <sch:value-of select="$georeferencedParameters"/>
			</sch:report>
		</sch:rule>	
	</sch:pattern>
</sch:schema>
